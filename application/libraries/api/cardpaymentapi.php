<?php/** * Created by Ivoglent Nguyen. * User: longnv * Date: 10/22/13 * Time: 3:18 PM * Project : payment * File : cardPaymentApi.php */require_once("CApi.php");class cardpaymentapi extends CApi implements IApiBehavior{    public function __construct($param){        $this->transaction_id=$param["trans_id"];    }    public function process(){        $result=$this->ApiRequest();        if($result==null) $this->result["message"]="Lỗi đường truyền";        if($presult=json_decode($result)){            if($presult->desc!="PAY_CARD_SUCCESS"){                if($presult->data->msg==null)                    $this->result["message"]="Nạp thẻ thất bại!!!";                else                    $this->result["message"]=$presult->data->msg;                $this->result["error"]=true;            }            else{                return $presult;            }        }        else{            $this->result["message"]="Dữ liệu sai";        }        $this->result["log_response"]=$result;        return $this->result;    }    public function setParams($_params){        $this->params=$_params;        $this->genToken();    }    public function setCommand($cmd){    }}